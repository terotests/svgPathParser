var svgPathParser_prototype=function(){"use strict";var t=function(){!function(t){var i,n,r,s,o,e,a,y;t.add=function(t,i){t.x=t.x+i.x,t.y=t.y+i.y},t.angleBetween=function(t,i){var n=this.normalize({x:t.x,y:t.y}),r=this.normalize({x:i.x,y:i.y}),s=this.crossProd(n,r),o=this.dotProd(n,r),e=Math.acos(o);return 0>s&&(e=-1*e),e},t.calc_cat=function(t,i,n,r,s){var o=t*t,e=o*t;return.5*(2*n+(-i+r)*t+(2*i-5*n+4*r-s)*o+(-i+3*n-3*r+s)*e)},t.crossProd=function(t,i){return t.x*i.y-t.y*i.x},t.diff=function(t,i){return{x:i.x-t.x,y:i.y-t.y}},t.dist=function(t,i){var n=t.x-i.x,r=t.y-i.y;return Math.sqrt(n*n+r*r)},t.dotProd=function(t,i){return t.x*i.x+t.y*i.y},t.getBarCoeffs=function(t,i,n){var r=a;return r.A=.5*(-i.y*n.x+t.y*(-i.x+n.x)+t.x*(i.y-n.y)+i.x*n.y),r.sign=r.A<0?-1:1,r.s1=(t.y*n.x-t.x*n.y+(n.y-t.y))*r.sign,r.s2=(n.y-t.y)*r.sign,r.s3=(t.x-n.x)*r.sign,r.t1=(t.x*i.y-t.y*i.x)*r.sign,r.t2=(t.y-i.y)*r.sign,r.t3=(i.x-t.x)*r.sign,r},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){o||(o={x:0,y:0},e={x:0,y:0},i=[0,0,0,0],n={x:0,y:0},r={x:0,y:0},s={x:0,y:0},a={Area:0,s1:0,s2:0,s3:0,t1:0,t2:0,t3:0,sign:0},y={x:0,y:0})}),t.initProjection=function(t,i){r.y=i.y-t.y,r.x=i.x-t.x,n.y=r.y,n.x=r.x,this.normalize(r),this.normalize(n),this.rotate(n,Math.PI/2),s.x=t.x,s.y=t.y},t.length=function(t){var i=t.x,n=t.y;return Math.sqrt(i*i+n*n)},t.linesIntersect=function(t,i,n,r){var s=t.x,o=t.y,e=i.x,a=i.y,y=n.x,h=n.y,f=r.x,x=r.y,c=((s*a-o*e)*(y-f)-(s-e)*(y*x-h*f))/((s-e)*(h-x)-(o-a)*(y-f)),u=((s*a-o*e)*(h-x)-(o-a)*(y*x-h*f))/((s-e)*(h-x)-(o-a)*(y-f));if(isNaN(c)||isNaN(u))return!1;if(s>=e){if(!(c>=e&&s>=c))return!1}else if(!(c>=s&&e>=c))return!1;if(o>=a){if(!(u>=a&&o>=u))return!1}else if(!(u>=o&&a>=u))return!1;if(y>=f){if(!(c>=f&&y>=c))return!1}else if(!(c>=y&&f>=c))return!1;if(h>=x){if(!(u>=x&&h>=u))return!1}else if(!(u>=h&&x>=u))return!1;return!0},t.mirrorVector=function(t,i,n){o.x=i.x-n.x,o.y=i.y-n.y,e.x=-o.y,e.y=o.x,t.x=t.x-n.x,t.y=t.y-n.y,this.dotProd(t,e)>0&&this.rotate(e,Math.PI),this.normalize(o),this.normalize(e);var r=Math.abs(this.dotProd(t,e)),s=this.dotProd(t,o);return t.x=e.x*r+o.x*s,t.y=e.y*r+o.y*s,t.x+=n.x,t.y+=n.y,t},t.normalize=function(t){var i=Math.sqrt(t.x*t.x+t.y*t.y);if(0==i)throw"Error normalizing vector: the length of the vector was zero";return t.x=t.x/i,t.y=t.y/i,t},t.opposeVector=function(t,i){o.x=i,x,o.y=i.y,e.x=-o.y,e.y=o.x,this.normalize(o),this.normalize(e),this.rotate(o,Math.PI);var n=Math.abs(jsMath.dotProd(t,e)),r=Math.abs(jsMath.dotProd(t,o));return this.dotProd(t,e)<0&&this.rotate(e,Math.PI),t.x=e.x*n+o.x*r,t.y=e.y*n+o.y*r,t},t.pointInTriangle=function(t,i,n,r){var s=.5*(-n.y*r.x+i.y*(-n.x+r.x)+i.x*(n.y-r.y)+n.x*r.y),o=0>s?-1:1,e=(i.y*r.x-i.x*r.y+(r.y-i.y)*t.x+(i.x-r.x)*t.y)*o,a=(i.x*n.y-i.y*n.x+(i.y-n.y)*t.x+(n.x-i.x)*t.y)*o;return e>0&&a>0&&2*s*o>e+a},t.pointInTriangleBc=function(t,i){var n=i.A,r=i.sign,s=i.s1+i.s2*t.x+i.s3*t.y,o=i.t1+i.t2*t.x+i.t3*t.y;return s>0&&o>0&&2*n*r>s+o},t.project=function(t){var i=t;return pVector.x=i.x-s.x,pVector.y=i.y-s.y,prodResult.i=this.dotProd(pVector,r),prodResult.j=this.dotProd(pVector,n),prodResult},t.rotate=function(t,i){var n=Math.sin(i),r=Math.cos(i),s=t.x,o=t.y;return t.x=s*r+o*n,t.y=-s*n+o*r,t},t.rotateAround=function(t,i,n){this.sub(i,n),this.rotate(i,t),this.add(i,n)},t.sub=function(t,i){t.x=t.x-i.x,t.y=t.y-i.y},t.tangentNormal=function(t,i,n){var r={};r.x=i.x-t.x,r.y=i.y-t.y;var s={};s.x=n.x-i.x,s.y=n.y-i.y;var o={x:r.x+s.x,y:r.y+s.y};return this.normalize(o)},t.triangleArea=function(t,i,n){var r=t.x*(i.y-n.y)+i.x*(n.y-t.y)+n.x*(t.y-i.y);return Math.abs(r/2)},t.triangleInTriangle=function(t,i,n,r,s,o){var e=this.getBarCoeffs(t,i,n);if(this.pointInTriangleBc(r,e))return!0;if(this.pointInTriangleBc(s,e))return!0;if(this.pointInTriangleBc(o,e))return!0;var e=this.getBarCoeffs(r,s,o);return this.pointInTriangleBc(t,e)?!0:this.pointInTriangleBc(i,e)?!0:this.pointInTriangleBc(n,e)?!0:this.linesIntersect(t,i,r,s)?!0:this.linesIntersect(i,n,r,s)?!0:this.linesIntersect(n,t,r,s)?!0:this.linesIntersect(t,i,s,o)?!0:this.linesIntersect(i,n,s,o)?!0:this.linesIntersect(n,t,s,o)?!0:this.linesIntersect(t,i,o,r)?!0:this.linesIntersect(i,n,o,r)?!0:this.linesIntersect(n,t,o,r)?!0:!1},t.unProject=function(t){var i=t;return y.x=i.i*r.x+i.j*n.x,y.y=i.i*r.y+i.j*n.y,y.x+=s.x,y.y+=s.y,y}}(this)},i=function(t,n,r,s,o,e,a,y){if(!(this instanceof i))return new i(t,n,r,s,o,e,a,y);var h=[t,n,r,s,o,e,a,y];if(this.__factoryClass){var f,x=this;if(this.__factoryClass.forEach(function(t){f=t.apply(x,h)}),"[object Function]"==Object.prototype.toString.call(f)){if(f._classInfo.name!=i._classInfo.name)return new f(t,n,r,s,o,e,a,y)}else if(f)return f}if(this.__traitInit){var x=this;this.__traitInit.forEach(function(t){t.apply(x,h)})}else"function"==typeof this.init&&this.init.apply(this,h)};i._classInfo={name:"jsVectors"},i.prototype=new t,"undefined"!=typeof window&&(window.jsVectors=i),"undefined"!=typeof window&&(window.jsVectors_prototype=t);var n=function(){var t=function(){!function(t){var i,n,r,s,o,e,a,y;t.add=function(t,i){t.x=t.x+i.x,t.y=t.y+i.y},t.angleBetween=function(t,i){var n=this.normalize({x:t.x,y:t.y}),r=this.normalize({x:i.x,y:i.y}),s=this.crossProd(n,r),o=this.dotProd(n,r),e=Math.acos(o);return 0>s&&(e=-1*e),e},t.calc_cat=function(t,i,n,r,s){var o=t*t,e=o*t;return.5*(2*n+(-i+r)*t+(2*i-5*n+4*r-s)*o+(-i+3*n-3*r+s)*e)},t.crossProd=function(t,i){return t.x*i.y-t.y*i.x},t.diff=function(t,i){return{x:i.x-t.x,y:i.y-t.y}},t.dist=function(t,i){var n=t.x-i.x,r=t.y-i.y;return Math.sqrt(n*n+r*r)},t.dotProd=function(t,i){return t.x*i.x+t.y*i.y},t.getBarCoeffs=function(t,i,n){var r=a;return r.A=.5*(-i.y*n.x+t.y*(-i.x+n.x)+t.x*(i.y-n.y)+i.x*n.y),r.sign=r.A<0?-1:1,r.s1=(t.y*n.x-t.x*n.y+(n.y-t.y))*r.sign,r.s2=(n.y-t.y)*r.sign,r.s3=(t.x-n.x)*r.sign,r.t1=(t.x*i.y-t.y*i.x)*r.sign,r.t2=(t.y-i.y)*r.sign,r.t3=(i.x-t.x)*r.sign,r},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){o||(o={x:0,y:0},e={x:0,y:0},i=[0,0,0,0],n={x:0,y:0},r={x:0,y:0},s={x:0,y:0},a={Area:0,s1:0,s2:0,s3:0,t1:0,t2:0,t3:0,sign:0},y={x:0,y:0})}),t.initProjection=function(t,i){r.y=i.y-t.y,r.x=i.x-t.x,n.y=r.y,n.x=r.x,this.normalize(r),this.normalize(n),this.rotate(n,Math.PI/2),s.x=t.x,s.y=t.y},t.length=function(t){var i=t.x,n=t.y;return Math.sqrt(i*i+n*n)},t.linesIntersect=function(t,i,n,r){var s=t.x,o=t.y,e=i.x,a=i.y,y=n.x,h=n.y,f=r.x,x=r.y,c=((s*a-o*e)*(y-f)-(s-e)*(y*x-h*f))/((s-e)*(h-x)-(o-a)*(y-f)),u=((s*a-o*e)*(h-x)-(o-a)*(y*x-h*f))/((s-e)*(h-x)-(o-a)*(y-f));if(isNaN(c)||isNaN(u))return!1;if(s>=e){if(!(c>=e&&s>=c))return!1}else if(!(c>=s&&e>=c))return!1;if(o>=a){if(!(u>=a&&o>=u))return!1}else if(!(u>=o&&a>=u))return!1;if(y>=f){if(!(c>=f&&y>=c))return!1}else if(!(c>=y&&f>=c))return!1;if(h>=x){if(!(u>=x&&h>=u))return!1}else if(!(u>=h&&x>=u))return!1;return!0},t.mirrorVector=function(t,i,n){o.x=i.x-n.x,o.y=i.y-n.y,e.x=-o.y,e.y=o.x,t.x=t.x-n.x,t.y=t.y-n.y,this.dotProd(t,e)>0&&this.rotate(e,Math.PI),this.normalize(o),this.normalize(e);var r=Math.abs(this.dotProd(t,e)),s=this.dotProd(t,o);return t.x=e.x*r+o.x*s,t.y=e.y*r+o.y*s,t.x+=n.x,t.y+=n.y,t},t.normalize=function(t){var i=Math.sqrt(t.x*t.x+t.y*t.y);if(0==i)throw"Error normalizing vector: the length of the vector was zero";return t.x=t.x/i,t.y=t.y/i,t},t.opposeVector=function(t,i){o.x=i,x,o.y=i.y,e.x=-o.y,e.y=o.x,this.normalize(o),this.normalize(e),this.rotate(o,Math.PI);var n=Math.abs(jsMath.dotProd(t,e)),r=Math.abs(jsMath.dotProd(t,o));return this.dotProd(t,e)<0&&this.rotate(e,Math.PI),t.x=e.x*n+o.x*r,t.y=e.y*n+o.y*r,t},t.pointInTriangle=function(t,i,n,r){var s=.5*(-n.y*r.x+i.y*(-n.x+r.x)+i.x*(n.y-r.y)+n.x*r.y),o=0>s?-1:1,e=(i.y*r.x-i.x*r.y+(r.y-i.y)*t.x+(i.x-r.x)*t.y)*o,a=(i.x*n.y-i.y*n.x+(i.y-n.y)*t.x+(n.x-i.x)*t.y)*o;return e>0&&a>0&&2*s*o>e+a},t.pointInTriangleBc=function(t,i){var n=i.A,r=i.sign,s=i.s1+i.s2*t.x+i.s3*t.y,o=i.t1+i.t2*t.x+i.t3*t.y;return s>0&&o>0&&2*n*r>s+o},t.project=function(t){var i=t;return pVector.x=i.x-s.x,pVector.y=i.y-s.y,prodResult.i=this.dotProd(pVector,r),prodResult.j=this.dotProd(pVector,n),prodResult},t.rotate=function(t,i){var n=Math.sin(i),r=Math.cos(i),s=t.x,o=t.y;return t.x=s*r+o*n,t.y=-s*n+o*r,t},t.rotateAround=function(t,i,n){this.sub(i,n),this.rotate(i,t),this.add(i,n)},t.sub=function(t,i){t.x=t.x-i.x,t.y=t.y-i.y},t.tangentNormal=function(t,i,n){var r={};r.x=i.x-t.x,r.y=i.y-t.y;var s={};s.x=n.x-i.x,s.y=n.y-i.y;var o={x:r.x+s.x,y:r.y+s.y};return this.normalize(o)},t.triangleArea=function(t,i,n){var r=t.x*(i.y-n.y)+i.x*(n.y-t.y)+n.x*(t.y-i.y);return Math.abs(r/2)},t.triangleInTriangle=function(t,i,n,r,s,o){var e=this.getBarCoeffs(t,i,n);if(this.pointInTriangleBc(r,e))return!0;if(this.pointInTriangleBc(s,e))return!0;if(this.pointInTriangleBc(o,e))return!0;var e=this.getBarCoeffs(r,s,o);return this.pointInTriangleBc(t,e)?!0:this.pointInTriangleBc(i,e)?!0:this.pointInTriangleBc(n,e)?!0:this.linesIntersect(t,i,r,s)?!0:this.linesIntersect(i,n,r,s)?!0:this.linesIntersect(n,t,r,s)?!0:this.linesIntersect(t,i,s,o)?!0:this.linesIntersect(i,n,s,o)?!0:this.linesIntersect(n,t,s,o)?!0:this.linesIntersect(t,i,o,r)?!0:this.linesIntersect(i,n,o,r)?!0:this.linesIntersect(n,t,o,r)?!0:!1},t.unProject=function(t){var i=t;return y.x=i.i*r.x+i.j*n.x,y.y=i.i*r.y+i.j*n.y,y.x+=s.x,y.y+=s.y,y}}(this)},i=function(t,n,r,s,o,e,a,y){if(!(this instanceof i))return new i(t,n,r,s,o,e,a,y);var h=[t,n,r,s,o,e,a,y];if(this.__factoryClass){var f,x=this;if(this.__factoryClass.forEach(function(t){f=t.apply(x,h)}),"[object Function]"==Object.prototype.toString.call(f)){if(f._classInfo.name!=i._classInfo.name)return new f(t,n,r,s,o,e,a,y)}else if(f)return f}if(this.__traitInit){var x=this;this.__traitInit.forEach(function(t){t.apply(x,h)})}else"function"==typeof this.init&&this.init.apply(this,h)};i._classInfo={name:"jsVectors"},i.prototype=new t,"undefined"!=typeof window&&(window.jsVectors=i),"undefined"!=typeof window&&(window.jsVectors_prototype=t),function(t){t.copy=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t,i,n,r){this.x=t||0,this.y=i||0,this.z=n||0,this.w=void 0!==r?r:1}),t.inverse=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},t.multiply=function(t,i){i||(i=t,t=this);var n=t.x*i.w+t.y*i.z-t.z*i.y+t.w*i.x,r=-t.x*i.z+t.y*i.w+t.z*i.x+t.w*i.y,s=t.x*i.y-t.y*i.x+t.z*i.w+t.w*i.z,o=-t.x*i.x-t.y*i.y-t.z*i.z+t.w*i.w;return this.x=n,this.y=r,this.z=s,this.w=o,this},t.normalizeVector3D=function(t){var i=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return 0==i||isNaN(i)?{x:1,y:0,z:0}:{x:t.x/i,y:t.y/i,z:t.z/i}},t.projectVector=function(t){var i={x:0,y:0,z:0},n=t.x,r=t.y,s=t.z,o=this.x,e=this.y,a=this.z,y=this.w,h=y*n+e*s-a*r,f=y*r+a*n-o*s,x=y*s+o*r-e*n,c=-o*n-e*r-a*s;return i.x=h*y+c*-o+f*-a-x*-e,i.y=f*y+c*-e+x*-o-h*-a,i.z=x*y+c*-a+h*-e-f*-o,i},t.rotate=function(t){return this.setFromAxisRotation({x:0,y:0,z:1},t),this},t.setFromAxisRotation=function(t,i){t=this.normalizeVector3D(t);var n=i/2,r=Math.sin(n);return this.x=t.x*r,this.y=t.y*r,this.z=t.z*r,this.w=Math.cos(n),this}}(this)},r=function(t,i,n,s,o,e,a,y){if(!(this instanceof r))return new r(t,i,n,s,o,e,a,y);var h=[t,i,n,s,o,e,a,y];if(this.__factoryClass){var f,x=this;if(this.__factoryClass.forEach(function(t){f=t.apply(x,h)}),"[object Function]"==Object.prototype.toString.call(f)){if(f._classInfo.name!=r._classInfo.name)return new f(t,i,n,s,o,e,a,y)}else if(f)return f}if(this.__traitInit){var x=this;this.__traitInit.forEach(function(t){t.apply(x,h)})}else"function"==typeof this.init&&this.init.apply(this,h)};r._classInfo={name:"quaternion"},r.prototype=new n,"undefined"!=typeof window&&(window.quaternion=r),"undefined"!=typeof window&&(window.quaternion_prototype=n);var s=function(){!function(t){var n;t.derivate=function(t,i){var n=this._points[t][0],r=this._points[t][1],s=this._points[t][2],o=this._points[t][3],e=i*i,a=1-i,y=a*a,h=3*y*(r-n)+6*i*a*(s-r)+3*e*(o-s);return h},t.distanceOf=function(t,i){var n=this.findClosestT(t,i),r=this.x(n)-t,s=this.y(n)-i;return Math.sqrt(r*r+s*s)},t.findClosestT=function(t,i){for(var n=0,r=.5,s=1,o=10;o--;){var e=this.x(n)-t,a=this.y(n)-i,y=this.x(s)-t,h=this.y(s)-i,f=Math.sqrt(e*e+a*a),x=Math.sqrt(y*y+h*h);x>f?s=r:n=r,r=n+(s-n)/2}var e=this.x(n)-t,a=this.y(n)-i,c=this.x(r)-t,u=this.y(r)-i;y=this.x(s)-t,h=this.y(s)-i;var f=Math.sqrt(e*e+a*a),p=Math.sqrt(c*c+u*u),x=Math.sqrt(y*y+h*h);return p>f&&x>f?n:p>x&&f>x?s:r},t.fitListTo=function(t){{var i={x:t[0].point_x(0),y:t[0].point_y(0)},r=t.length-1,s={x:t[r].point_x(3),y:t[r].point_y(3)},o={x:this.x(0),y:this.y(0)},e={x:this.x(1),y:this.y(1)},a=e.x-o.x,y=e.y-o.y,h=(Math.sqrt(a*a+y*y),s.x-i.x),f=s.y-i.y;Math.sqrt(h*h+f*f),n.angleBetween({x:a,y:y},{x:h,y:f})}},t.fromLine=function(t,i){var n=i.x-t.x,r=n/3;this.initCoeffs(0,t.x,t.x+r,t.x+2*r,i.x);var n=i.y-t.y,r=n/3;this.initCoeffs(1,t.y,t.y+r,t.y+2*r,i.y)},t.fromPoints=function(t,i,n,r){this.initCoeffs(0,t.x,i.x,n.x,r.x),this.initCoeffs(1,t.y,i.y,n.y,r.y)},t.fromQuadCurve=function(t,i,n){this.initCoeffs(0,t.x,t.x+2/3*(i.x-t.x),n.x+2/3*(i.x-n.x),n.x),this.initCoeffs(0,t.y,t.y+2/3*(i.y-t.y),n.y+2/3*(i.y-n.y),n.y)},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){this._points=[],this._m=[],n||(n=i()),this._m=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}]}),t.initCoeffs=function(t,i,n,r,s){this._coeffs||(this._coeffs=[]),this._coeffs[t]||(this._coeffs[t]=[]),this._points[t]||(this._points[t]=[]),this._points[t][0]=i,this._points[t][1]=n,this._points[t][2]=r,this._points[t][3]=s;var o=this._coeffs[t];o[0]=3*(n-i),o[1]=3*(r-n)-o[0],o[2]=s-i-o[0]-o[1],o[3]=i,0==t&&(this._m[0].x=i,this._m[1].x=n,this._m[2].x=r,this._m[3].x=s),1==t&&(this._m[0].y=i,this._m[1].y=n,this._m[2].y=r,this._m[3].y=s)},t.inverseProject=function(t){var i=t.t,n=this.normal(i,!0),r=n.x*t.nvProd+this.x(i),s=n.y*t.nvProd+this.y(i),o=this.tangent(i,!0);r+=t.tangetProd*o.x,s+=t.tangetProd*o.y,t.ix=r,t.iy=s},t.mirrorControls=function(){var t={x:this._points[0][0],y:this._points[1][0]},i={x:this._points[0][3],y:this._points[1][3]},r={x:this._points[0][1],y:this._points[1][1]},s={x:this._points[0][2],y:this._points[1][2]};n.mirrorVector(r,i,t),n.mirrorVector(s,i,t),this.initCoeffs(0,t.x,r.x,s.x,i.x),this.initCoeffs(1,t.y,r.y,s.y,i.y)},t.normal=function(t,i){var r=this.tangent(t),s=r.x;return r.x=-r.y,r.y=s,i&&n.normalize(r),r},t.point_x=function(t){return this._points[0][t]},t.point_y=function(t){return this._points[1][t]},t.points=function(){return this._m},t.projectPoint=function(t,i,n){for(var r=20,s=.5,o=.25;r--;){var e=this.tangent(s,!0);dv.x=t-this.x(s),dv.y=i-this.y(s);var a=dv.x*e.x+dv.y*e.y;if(Math.abs(a)<.05)break;s+=a>0?o:-o,o/=2}var y=this.normal(s,!0);return n||(n={}),n.tangentProd=a,n.nvProd=y.x*dv.x+y.y*d.y,n.nv_x=y.x,n.nv_y=y.y,n.tn_x=e.x,n.tn_y=e.y,n.ix=0,n.iy=0,n.t=s,n},t.setControls=function(t,i,n,r){this.initCoeffs(0,t.x,i.x,n.x,r.x),this.initCoeffs(1,t.y,i.y,n.y,r.y)},t.split=function(t){var i=this._points[0],n=this.splitCoeff(i[0],i[1],i[2],i[3],t);i=this._points[1];var r=this.splitCoeff(i[0],i[1],i[2],i[3],t);this.fromPoints({x:n.p0,y:r.p0},{x:n.p1,y:r.p1},{x:n.p2,y:r.p2},{x:n.p3,y:r.p3});var s=o();return s.fromPoints({x:n.p3,y:r.p3},{x:n.p4,y:r.p4},{x:n.p5,y:r.p5},{x:n.p6,y:r.p6}),s},t.splitCoeff=function(t,i,n,r,s){var o={};o.p0=t,o.p1=(1-s)*t+s*i;var e=(1-s)*i+s*n;return o.p5=(1-s)*n+s*r,o.p2=(1-s)*o.p1+s*e,o.p4=(1-s)*e+s*o.p5,o.p3=(1-s)*o.p2+s*o.p4,o.p6=r,o},t.step=function(t,i){if(this._coeffs){var n=this._coeffs[i];if(n){var r=t*t,s=r*t;return n[2]*s+n[1]*r+n[0]*t+n[3]}}},t.tangent=function(t,i){var r={};return r.x=this.derivate(0,t),r.y=this.derivate(1,t),i&&n.normalize(r),r},t.x=function(t){return this.step(t,0)},t.y=function(t){return this.step(t,1)},t.z=function(t){return this.step(t,2)}}(this)},o=function(t,i,n,r,s,e,a,y){if(!(this instanceof o))return new o(t,i,n,r,s,e,a,y);var h=[t,i,n,r,s,e,a,y];if(this.__factoryClass){var f,x=this;if(this.__factoryClass.forEach(function(t){f=t.apply(x,h)}),"[object Function]"==Object.prototype.toString.call(f)){if(f._classInfo.name!=o._classInfo.name)return new f(t,i,n,r,s,e,a,y)}else if(f)return f}if(this.__traitInit){var x=this;this.__traitInit.forEach(function(t){t.apply(x,h)})}else"function"==typeof this.init&&this.init.apply(this,h)};o._classInfo={name:"jsBezierCurve"},o.prototype=new s,"undefined"!=typeof window&&(window.jsBezierCurve=o),"undefined"!=typeof window&&(window.jsBezierCurve_prototype=s);var e=function(){var t=function(){!function(t){var i,n,r,s,o,e,a,y;t.add=function(t,i){t.x=t.x+i.x,t.y=t.y+i.y},t.angleBetween=function(t,i){var n=this.normalize({x:t.x,y:t.y}),r=this.normalize({x:i.x,y:i.y}),s=this.crossProd(n,r),o=this.dotProd(n,r),e=Math.acos(o);return 0>s&&(e=-1*e),e},t.calc_cat=function(t,i,n,r,s){var o=t*t,e=o*t;return.5*(2*n+(-i+r)*t+(2*i-5*n+4*r-s)*o+(-i+3*n-3*r+s)*e)},t.crossProd=function(t,i){return t.x*i.y-t.y*i.x},t.diff=function(t,i){return{x:i.x-t.x,y:i.y-t.y}},t.dist=function(t,i){var n=t.x-i.x,r=t.y-i.y;return Math.sqrt(n*n+r*r)},t.dotProd=function(t,i){return t.x*i.x+t.y*i.y},t.getBarCoeffs=function(t,i,n){var r=a;return r.A=.5*(-i.y*n.x+t.y*(-i.x+n.x)+t.x*(i.y-n.y)+i.x*n.y),r.sign=r.A<0?-1:1,r.s1=(t.y*n.x-t.x*n.y+(n.y-t.y))*r.sign,r.s2=(n.y-t.y)*r.sign,r.s3=(t.x-n.x)*r.sign,r.t1=(t.x*i.y-t.y*i.x)*r.sign,r.t2=(t.y-i.y)*r.sign,r.t3=(i.x-t.x)*r.sign,r},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){o||(o={x:0,y:0},e={x:0,y:0},i=[0,0,0,0],n={x:0,y:0},r={x:0,y:0},s={x:0,y:0},a={Area:0,s1:0,s2:0,s3:0,t1:0,t2:0,t3:0,sign:0},y={x:0,y:0})}),t.initProjection=function(t,i){r.y=i.y-t.y,r.x=i.x-t.x,n.y=r.y,n.x=r.x,this.normalize(r),this.normalize(n),this.rotate(n,Math.PI/2),s.x=t.x,s.y=t.y},t.length=function(t){var i=t.x,n=t.y;return Math.sqrt(i*i+n*n)},t.linesIntersect=function(t,i,n,r){var s=t.x,o=t.y,e=i.x,a=i.y,y=n.x,h=n.y,f=r.x,x=r.y,c=((s*a-o*e)*(y-f)-(s-e)*(y*x-h*f))/((s-e)*(h-x)-(o-a)*(y-f)),u=((s*a-o*e)*(h-x)-(o-a)*(y*x-h*f))/((s-e)*(h-x)-(o-a)*(y-f));if(isNaN(c)||isNaN(u))return!1;if(s>=e){if(!(c>=e&&s>=c))return!1}else if(!(c>=s&&e>=c))return!1;if(o>=a){if(!(u>=a&&o>=u))return!1}else if(!(u>=o&&a>=u))return!1;if(y>=f){if(!(c>=f&&y>=c))return!1}else if(!(c>=y&&f>=c))return!1;if(h>=x){if(!(u>=x&&h>=u))return!1}else if(!(u>=h&&x>=u))return!1;return!0},t.mirrorVector=function(t,i,n){o.x=i.x-n.x,o.y=i.y-n.y,e.x=-o.y,e.y=o.x,t.x=t.x-n.x,t.y=t.y-n.y,this.dotProd(t,e)>0&&this.rotate(e,Math.PI),this.normalize(o),this.normalize(e);var r=Math.abs(this.dotProd(t,e)),s=this.dotProd(t,o);return t.x=e.x*r+o.x*s,t.y=e.y*r+o.y*s,t.x+=n.x,t.y+=n.y,t},t.normalize=function(t){var i=Math.sqrt(t.x*t.x+t.y*t.y);if(0==i)throw"Error normalizing vector: the length of the vector was zero";return t.x=t.x/i,t.y=t.y/i,t},t.opposeVector=function(t,i){o.x=i,x,o.y=i.y,e.x=-o.y,e.y=o.x,this.normalize(o),this.normalize(e),this.rotate(o,Math.PI);var n=Math.abs(jsMath.dotProd(t,e)),r=Math.abs(jsMath.dotProd(t,o));return this.dotProd(t,e)<0&&this.rotate(e,Math.PI),t.x=e.x*n+o.x*r,t.y=e.y*n+o.y*r,t},t.pointInTriangle=function(t,i,n,r){var s=.5*(-n.y*r.x+i.y*(-n.x+r.x)+i.x*(n.y-r.y)+n.x*r.y),o=0>s?-1:1,e=(i.y*r.x-i.x*r.y+(r.y-i.y)*t.x+(i.x-r.x)*t.y)*o,a=(i.x*n.y-i.y*n.x+(i.y-n.y)*t.x+(n.x-i.x)*t.y)*o;return e>0&&a>0&&2*s*o>e+a},t.pointInTriangleBc=function(t,i){var n=i.A,r=i.sign,s=i.s1+i.s2*t.x+i.s3*t.y,o=i.t1+i.t2*t.x+i.t3*t.y;return s>0&&o>0&&2*n*r>s+o},t.project=function(t){var i=t;return pVector.x=i.x-s.x,pVector.y=i.y-s.y,prodResult.i=this.dotProd(pVector,r),prodResult.j=this.dotProd(pVector,n),prodResult},t.rotate=function(t,i){var n=Math.sin(i),r=Math.cos(i),s=t.x,o=t.y;return t.x=s*r+o*n,t.y=-s*n+o*r,t},t.rotateAround=function(t,i,n){this.sub(i,n),this.rotate(i,t),this.add(i,n)},t.sub=function(t,i){t.x=t.x-i.x,t.y=t.y-i.y},t.tangentNormal=function(t,i,n){var r={};r.x=i.x-t.x,r.y=i.y-t.y;var s={};s.x=n.x-i.x,s.y=n.y-i.y;var o={x:r.x+s.x,y:r.y+s.y};return this.normalize(o)},t.triangleArea=function(t,i,n){var r=t.x*(i.y-n.y)+i.x*(n.y-t.y)+n.x*(t.y-i.y);return Math.abs(r/2)},t.triangleInTriangle=function(t,i,n,r,s,o){var e=this.getBarCoeffs(t,i,n);if(this.pointInTriangleBc(r,e))return!0;if(this.pointInTriangleBc(s,e))return!0;if(this.pointInTriangleBc(o,e))return!0;var e=this.getBarCoeffs(r,s,o);return this.pointInTriangleBc(t,e)?!0:this.pointInTriangleBc(i,e)?!0:this.pointInTriangleBc(n,e)?!0:this.linesIntersect(t,i,r,s)?!0:this.linesIntersect(i,n,r,s)?!0:this.linesIntersect(n,t,r,s)?!0:this.linesIntersect(t,i,s,o)?!0:this.linesIntersect(i,n,s,o)?!0:this.linesIntersect(n,t,s,o)?!0:this.linesIntersect(t,i,o,r)?!0:this.linesIntersect(i,n,o,r)?!0:this.linesIntersect(n,t,o,r)?!0:!1},t.unProject=function(t){var i=t;return y.x=i.i*r.x+i.j*n.x,y.y=i.i*r.y+i.j*n.y,y.x+=s.x,y.y+=s.y,y}}(this)},i=function(t,n,r,s,o,e,a,y){if(!(this instanceof i))return new i(t,n,r,s,o,e,a,y);var h=[t,n,r,s,o,e,a,y];if(this.__factoryClass){var f,x=this;if(this.__factoryClass.forEach(function(t){f=t.apply(x,h)}),"[object Function]"==Object.prototype.toString.call(f)){if(f._classInfo.name!=i._classInfo.name)return new f(t,n,r,s,o,e,a,y)}else if(f)return f}if(this.__traitInit){var x=this;this.__traitInit.forEach(function(t){t.apply(x,h)})}else"function"==typeof this.init&&this.init.apply(this,h)};i._classInfo={name:"jsVectors"},i.prototype=new t,"undefined"!=typeof window&&(window.jsVectors=i),"undefined"!=typeof window&&(window.jsVectors_prototype=t),function(t){t.bezierSplit=function(t,i,n,r,s){var o={};o.p1=(1-s)*t+s*i;var e=(1-s)*i+s*n;return o.p5=(1-s)*n+s*r,o.p2=(1-s)*o.p1+s*e,o.p4=(1-s)*e+s*o.p5,o.p3=(1-s)*o.p2+s*o.p4,o},t.endPoint=function(t,i,n){t||(t={x:0,y:0,z:0}),i||(i=r());var s=0;return n||(n=function(t){return t}),this.list.forEach(function(r){if(s++,"Q"==r.cmd){var o=0;r.path.forEach(function(r){r=n(r);var s={x:r.d,y:0,z:0};i.multiply(r.q);var e=i.projectVector(s);t.x+=e.x,t.y+=e.y,t.z+=e.z,o++})}if("M"==r.cmd&&r.path.forEach(function(r){r=n(r);var s={x:r.d,y:0,z:0};i.multiply(r.q);var o=i.projectVector(s);t.x+=o.x,t.y+=o.y,t.z+=o.z}),"L"==r.cmd&&r.path.forEach(function(r){r=n(r);var s={x:r.d,y:0,z:0};i.multiply(r.q);var o=i.projectVector(s);t.x+=o.x,t.y+=o.y,t.z+=o.z}),"C"==r.cmd){var o=0;r.path.forEach(function(r){r=n(r);var s={x:r.d,y:0,z:0};i.multiply(r.q);var e=i.projectVector(s);t.x+=e.x,t.y+=e.y,t.z+=e.z,o++})}}),t},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t){this.list=t}),t.partToSvgPath=function(t,i,n,s){var o="";n||(n={x:0,y:0,z:0}),s||(s=r()),this.addedObjects=[];var e=this,a=0;return this.list.forEach(function(r){if(a++,!(t>a||a>i)){var y=_e("g");if(y.circle().attr({fill:"#ffaa88",cx:n.x,cy:n.y,r:10}),y.svg_text().attr({x:n.x,y:n.y+10,"font-size":20,fill:"black"}).text(a+""),e.addedObjects.push(y),"Q"==r.cmd){var h=0;r.path.forEach(function(t){var i={x:t.d,y:0,z:0};s.multiply(t.q);var r=s.projectVector(i);n.x+=r.x,n.y+=r.y,n.z+=r.z,0==h&&(o+="Q "),o+=" "+n.x.toFixed(3)+", "+n.y.toFixed(3),h++})}if("M"==r.cmd&&r.path.forEach(function(t){var i={x:t.d,y:0,z:0};s.multiply(t.q);var r=s.projectVector(i);n.x+=r.x,n.y+=r.y,n.z+=r.z,o+="M "+n.x.toFixed(3)+", "+n.y.toFixed(3)}),"L"==r.cmd&&r.path.forEach(function(t){var i={x:t.d,y:0,z:0};s.multiply(t.q);var r=s.projectVector(i);n.x+=r.x,n.y+=r.y,n.z+=r.z,o+="L "+n.x.toFixed(3)+", "+n.y.toFixed(3)}),"C"==r.cmd){var h=0;r.path.forEach(function(t){var i={x:t.d,y:0,z:0};s.multiply(t.q);var r=s.projectVector(i);n.x+=r.x,n.y+=r.y,n.z+=r.z,0==h&&(o+="C "),o+=" "+n.x.toFixed(3)+", "+n.y.toFixed(3),h++})}}}),o},t.pathFunction=function(){},t.quadToCubic=function(t,i,n){return{p0:t,p1:t+2/3*(i-t),p2:n+2/3*(i-n),p3:n}},t.toSvgCubicPath=function(t,i){var n="";t||(t={x:0,y:0,z:0}),i||(i=r());var s=0;return this.list.forEach(function(r){var o={x:r.d,y:0,z:0};i.multiply(r.q);var e=i.projectVector(o);t.x+=e.x,t.y+=e.y,t.z+=e.z,n+=0==s?"C "+t.x.toFixed(3)+", "+t.y.toFixed(3):" "+t.x.toFixed(3)+", "+t.y.toFixed(3),s++}),n},t.toSvgPath=function(t,i,n){var s="";t||(t={x:0,y:0,z:0}),i||(i=r()),this.addedObjects=[];var o=0;return n||(n=function(t){return t}),this.list.forEach(function(r){if(o++,"Q"==r.cmd){var e=0;r.path.forEach(function(r){r=n(r);var o={x:r.d,y:0,z:0};i.multiply(r.q);var a=i.projectVector(o);t.x+=a.x,t.y+=a.y,t.z+=a.z,0==e&&(s+="Q "),s+=" "+t.x.toFixed(3)+", "+t.y.toFixed(3),e++})}if("M"==r.cmd&&r.path.forEach(function(r){r=n(r);var o={x:r.d,y:0,z:0};i.multiply(r.q);var e=i.projectVector(o);t.x+=e.x,t.y+=e.y,t.z+=e.z,s+="M "+t.x.toFixed(3)+", "+t.y.toFixed(3)}),"L"==r.cmd&&r.path.forEach(function(r){r=n(r);var o={x:r.d,y:0,z:0};i.multiply(r.q);var e=i.projectVector(o);t.x+=e.x,t.y+=e.y,t.z+=e.z,s+="L "+t.x.toFixed(3)+", "+t.y.toFixed(3)}),"C"==r.cmd){var e=0;r.path.forEach(function(r){r=n(r);var o={x:r.d,y:0,z:0};i.multiply(r.q);var a=i.projectVector(o);t.x+=a.x,t.y+=a.y,t.z+=a.z,0==e&&(s+="C "),s+=" "+t.x.toFixed(3)+", "+t.y.toFixed(3),e++})}}),s}}(this)},a=function(t,i,n,r,s,o,e,y){if(!(this instanceof a))return new a(t,i,n,r,s,o,e,y);var h=[t,i,n,r,s,o,e,y];if(this.__factoryClass){var f,x=this;if(this.__factoryClass.forEach(function(t){f=t.apply(x,h)}),"[object Function]"==Object.prototype.toString.call(f)){if(f._classInfo.name!=a._classInfo.name)return new f(t,i,n,r,s,o,e,y)}else if(f)return f}if(this.__traitInit){var x=this;this.__traitInit.forEach(function(t){t.apply(x,h)})}else"function"==typeof this.init&&this.init.apply(this,h)};a._classInfo={name:"pathIterator"},a.prototype=new e,"undefined"!=typeof window&&(window.pathIterator=a),"undefined"!=typeof window&&(window.pathIterator_prototype=e),function(t){var n;t.drawPath=function(t){var i,n;t.beginPath(),this._all.forEach(function(r){if("M"==r.name&&(i=r.points[0],n=r.points[1],t.moveTo(i,n)),"m"==r.name&&(i+=r.points[0],n+=r.points[1],t.moveTo(i,n)),"q"==r.name)for(var s=0;s<r.points.length;s+=4){var o=r.points,e=i+o[s+0],a=n+o[s+1],y=i+o[s+2],h=n+o[s+3];i=y,n=h,t.quadraticCurveTo(e,a,y,h,x,c)}if("Q"==r.name)for(var o=r.points,f=r.points.length,s=0;f>s;s+=4)t.quadraticCurveTo(o[s+0],o[s+1],o[s+2],o[s+3]);if("c"==r.name)for(var s=0;s<r.points.length;s+=6){var o=r.points,e=i+o[s+0],a=n+o[s+1],y=i+o[s+2],h=n+o[s+3],x=i+o[s+4],c=n+o[s+5];i=x,n=c,t.bezierCurveTo(e,a,y,h,x,c)}if("C"==r.name)for(var o=r.points,f=r.points.length,s=0;f>s;s+=6)t.bezierCurveTo(o[s+0],o[s+1],o[s+2],o[s+3],o[s+4],o[s+5]);if("l"==r.name)for(var s=0;s<r.points.length;s+=2){var o=r.points,e=i+o[s+0],a=n+o[s+1];i=e,n=a,t.lineTo(e,a)}if("H"==r.name)for(var s=0;s<r.points.length;s++){var o=r.points,e=o[s+0];i=e,t.lineTo(e,n)}if("V"==r.name)for(var s=0;s<r.points.length;s++){var o=r.points,a=o[s+0];n=a,t.lineTo(i,a)}if("L"==r.name)for(var s=0;s<r.points.length;s+=2){var o=r.points,e=o[s+0],a=o[s+1];i=e,n=a,t.lineTo(e,a)}"z"==r.name&&t.closePath()})},t.findDimensions=function(){if(this._limits)return this._limits;var t,i,n,r,s,o,e=function(s,o){"undefined"==typeof t&&(t=s,n=s,i=o,r=o),t=Math.min(t,s),i=Math.min(i,o),n=Math.max(n,s),r=Math.max(r,o)};return this._all.forEach(function(t){if("M"==t.name&&(s=t.points[0],o=t.points[1],e(s,o)),"m"==t.name&&(s+=t.points[0],o+=t.points[1],e(s,o)),"c"==t.name)for(var i=0;i<t.points.length;i+=6){var n=t.points,r=s+n[i+0],a=o+n[i+1],y=s+n[i+2],h=o+n[i+3],f=s+n[i+4],x=o+n[i+5];e(r,a),e(y,h),e(f,x),s=f,o=x}if("C"==t.name)for(var n=t.points,c=t.points.length,i=0;c>i;i+=6)e(n[i+0],n[i+1]),e(n[i+2],n[i+3]),e(n[i+4],n[i+5]);if("l"==t.name)for(var i=0;i<t.points.length;i+=2){var n=t.points,r=s+n[i+0],a=o+n[i+1];s=r,o=a,e(s,o)}if("L"==t.name)for(var i=0;i<t.points.length;i+=2){var n=t.points,r=n[i+0],a=n[i+1];s=r,o=a,e(s,o)}}),this._limits=[t,i,n,r],this._limits},t.fitPathInto=function(t,i){for(var n=this.findDimensions(),r=!0,s=0;4>s;s++)(n[s]<0||n[s]>t)&&(r=!1);var o=Math.abs(n[2]-n[0]),e=Math.abs(n[3]-n[1]),a=!1;Math.abs(n[3])<Math.abs(n[1])&&(a=!0);var y=t/o,h=i/e,f=-n[0],x=-n[1],c=Math.min(y,h),u=c;a&&(u=-u,x=-n[3]);var p=function(t){return(t+f)*c},l=function(t){return(t+x)*u};this._all.forEach(function(t){if("M"==t.name&&(t.points[0]=p(t.points[0]),t.points[1]=l(t.points[1])),"m"==t.name&&(t.points[0]*=c,t.points[1]*=u),"L"==t.name)for(var i=0;i<t.points.length;i+=2){var n=t.points;n[i+0]=p(n[i+0]),n[i+1]=l(n[i+1])}if("c"==t.name)for(var i=0;i<t.points.length;i+=6){var n=t.points;n[i+0]*=c,n[i+2]*=c,n[i+4]*=c,n[i+1]*=u,n[i+3]*=u,n[i+5]*=u}if("C"==t.name)for(var n=t.points,r=t.points.length,i=0;r>i;i+=6)n[i+0]=p(n[i+0]),n[i+2]=p(n[i+2]),n[i+4]=p(n[i+4]),n[i+1]=l(n[i+1]),n[i+3]=l(n[i+3]),n[i+5]=l(n[i+5]);if("Q"==t.name)for(var n=t.points,r=t.points.length,i=0;r>i;i+=4)n[i+0]=p(n[i+0]),n[i+2]=p(n[i+2]),n[i+1]=l(n[i+1]),n[i+3]=l(n[i+3]);if("l"==t.name)for(var i=0;i<t.points.length;i+=2){var n=t.points;n[i+0]*=c,n[i+1]*=u}}),this._limits=null},t.flowerCurve=function(t,n){n=n||{};var r,s=n.leafCount||5,o=0,e=!0,a=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],y=360/s,h=0,f=svgPathParser();f.parse(t),f.makePathAbsolute();var x=f.toBezierArray();console.log(x);var c=x[0];if(c){var u=c.point_x(0),p=c.point_y(0),l=canvasContext();l.beginPath();for(var v=x.length;s>h;h++){l.translate(u,p),l.rotate(y*Math.PI/180),l.translate(-u,-p),o=0,e=!0;for(var _,d={x:0,y:0},m={x:0,y:0};(r=x[o++])&&(_=r.points(),_[1])&&(e&&(l.moveTo(_[0].x,_[0].y),m.x=_[0].x,m.y=_[0].y),l.bezierCurveTo(_[1].x,_[1].y,_[2].x,_[2].y,_[3].x,_[3].y),o!=v);)e=!1;d.x=_[3].x,d.y=_[3].y;var g=i();for(o-=1;r=x[o--];){var _=r.points();if(a[0].x=_[0].x,a[0].y=_[0].y,a[1].x=_[1].x,a[1].y=_[1].y,a[2].x=_[2].x,a[2].y=_[2].y,g.mirrorVector(a[0],d,m),g.mirrorVector(a[1],d,m),g.mirrorVector(a[2],d,m),l.bezierCurveTo(a[2].x,a[2].y,a[1].x,a[1].y,a[0].x,a[0].y),0>o)break;e=!1}}return l.svgPathString()}},t.forCmds=function(t){this._all.forEach(t)},t.fromBezierArray=function(t){{var i,n=t.length;this._all}this._all=[];for(var i=0;n>i;i++){var r=t[i];if(0==i){var s={name:"M",points:[r.point_x(0),r.point_y(0)]};this._all.push(s)}var s={name:"C",points:[r.point_x(1),r.point_y(1),r.point_x(2),r.point_y(2),r.point_x(3),r.point_y(3)]};this._all.push(s)}this.saveToOriginals()},t.getCommands=function(){return this._all},t.getPath=function(t){return this._all[t]},t.getSegmentCount=function(){var t=this._all.length;return"z"==this._all[t-1].name&&t--,t},t.getSubPaths=function(){return this._subPaths},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){this._activeCmd=null,this._all=[],this._stringLeft="",this._original=null,this._x=0,this._y=0,n||(n={})}),t.initCmd=function(t){return this._activeCmd={name:t,points:[]},this._all.push(this._activeCmd),this._activeCmd},t.inverse=function(){var t,i=this.originals(),n=i.length;this._all.reverse();var i=(this._all,this._all),r=[],s=function(t,i){for(var n=[],r=t.points.length/2,s=t.points.length-4;r>0;){if(1==r){if(!i)return n;s=i.points.length-2,n.push(i.points[s]),n.push(i.points[s+1])}else n.push(t.points[s]),n.push(t.points[s+1]),s-=2;r--}return n};"z"==i[0].name&&i.shift();for(var t=0;n>t;t++){{var o,e=i[t];i[t],i[t+1]}if(!e)break;if(t>0&&(o=i[t-1]),0==t){var a=e.points.length-2,y={name:"M",points:[e.points[a],e.points[a+1]]};r.push(y)}else{var y={name:o.name,points:s(o,e)};r.push(y)}}var y={name:"z",points:[]};r.push(y),this._all=r},t.makePathAbsolute=function(){var t,i,n,r,s=!0,o=function(){s&&(n=t,r=i);var o=t-n,e=i-r;return{x:t+o,y:i+e}};this._all.forEach(function(e){if("M"==e.name&&(t=e.points[0],i=e.points[1],s=!0),"L"==e.name&&(t=e.points[0],i=e.points[1],s=!0),"m"==e.name&&(t+=e.points[0],i+=e.points[1],e.points[0]=t,e.points[1]=i,e.name="M",s=!0),"q"==e.name){for(var a=0;a<e.points.length;a+=4){var y=e.points;y[a+0]=t+y[a+0],y[a+1]=i+y[a+1],y[a+2]=t+y[a+2],y[a+3]=i+y[a+3],t=y[a+2],i=y[a+3],e.name="Q"
}s=!0}if("C"==e.name){var y=e.points;n=y[2],r=y[3],t=y[4],i=y[5],s=!1}if("c"==e.name){for(var a=0;a<e.points.length;a+=6){var y=e.points;y[a+0]=t+y[a+0],y[a+1]=i+y[a+1],y[a+2]=t+y[a+2],y[a+3]=i+y[a+3],y[a+4]=t+y[a+4],y[a+5]=i+y[a+5],t=y[a+4],i=y[a+5],n=y[a+2],r=y[a+3],e.name="C"}s=!1}if("S"==e.name){var y=e.points,h=o(),f=[];f[0]=h.x,f[1]=h.y,f[2]=y[0],f[3]=y[1],f[4]=y[2],f[5]=y[3],t=f[4],i=f[5],n=f[2],r=f[3],e.name="C",e.points=f,s=!1}if("s"==e.name){var y=e.points,h=o(),f=[];f[0]=h.x,f[1]=h.y,f[2]=t+y[0],f[3]=i+y[1],f[4]=t+y[2],f[5]=i+y[3],t=f[4],i=f[5],n=f[2],r=f[3],e.name="C",e.points=f,s=!1}if("h"==e.name){s=!0;for(var a=0;a<e.points.length;a++){var y=e.points,x=t+y[a+0];return t=x,y[a+0]=x,e.points=[x,i],void(e.name="L")}}if("H"==e.name){s=!0;for(var a=0;a<e.points.length;a++){var y=e.points,x=y[a+0];return t=x,y[a+0]=x,e.points=[x,i],void(e.name="L")}}if("V"==e.name){s=!0;for(var a=0;a<e.points.length;a++){var y=e.points,c=y[a+0];return i=c,e.points=[t,c],void(e.name="L")}}if("v"==e.name){s=!0;for(var a=0;a<e.points.length;a++){var y=e.points,c=i+y[a+0];return i=c,e.points=[t,c],void(e.name="L")}}if("l"==e.name){s=!0;for(var a=0;a<e.points.length;a+=2){var y=e.points,x=t+y[a+0],c=i+y[a+1];t=x,i=c,y[a+0]=x,y[a+1]=c,e.name="L"}}})},t.n=function(t){return t.toFixed(5)},t.normalize=function(t,i){t||(t=800),i||(i=800),this.makePathAbsolute(),this.fitPathInto(t,i)},t.originals=function(){return this._original||(this._original=JSON.parse(JSON.stringify(this._all))),this._original},t.parse=function(t){this._activeCmd=null,this._all=[],this._stringLeft="",this._original=null,this._x=0,this._y=0,this._usedCommands={},t||(t="M25.979,12.896 L 5.979,12.896,5.979,19.562,25.979,19.562z");var i=t,n=0,r=1e4;for(this._subPaths=t.split("M"),this._subIndex=0;(i=this.popCommand(i))&&0!=i.length&&i.length!=n&&!(r--<0);)n=i.length;return this._all},t.path=function(){return this._all},t.pathFunction=function(){},t.popCommand=function(t){t=t.trim();var i=t.charAt(0),n=null;if("M"==i&&(n=this.initCmd(i),t=t.substring(1)),"m"==i&&(n=this.initCmd(i),t=t.substring(1)),"Q"==i&&(n=this.initCmd(i),t=t.substring(1)),"q"==i&&(n=this.initCmd(i),t=t.substring(1)),"S"==i&&(n=this.initCmd(i),t=t.substring(1)),"s"==i&&(n=this.initCmd(i),t=t.substring(1)),"C"==i&&(n=this.initCmd(i),t=t.substring(1)),"c"==i&&(n=this.initCmd(i),t=t.substring(1)),"H"==i&&(n=this.initCmd(i),t=t.substring(1)),"h"==i&&(n=this.initCmd(i),t=t.substring(1)),"V"==i&&(n=this.initCmd(i),t=t.substring(1)),"v"==i&&(n=this.initCmd(i),t=t.substring(1)),"L"==i&&(n=this.initCmd(i),t=t.substring(1)),"l"==i&&(n=this.initCmd(i),t=t.substring(1)),"Z"==i&&(n=this.initCmd(i),t=t.substring(1)),"z"==i&&(n=this.initCmd(i),t=t.substring(1)),n){this._usedCommands[i]="true",t=t.trim();for(var r=!0;r&&t.length>0;){var s=t.charAt(0);","==s&&(t=t.substring(1),t=t.trim());for(var o=["-","1","2","3","4","5","6","7","8","9","0","."],e="",a=0;o.indexOf(t.charAt(0))>=0&&!("-"==t.charAt(0)&&(a++,a>1));)e+=t.charAt(0),t=t.substring(1),a=1;if(!(e.length>0))break;n.points.push(parseFloat(e)),t=t.trim()}}return n||(console.error("No command found for"),console.error(t)),this._activeCmd=n,this._stringLeft=t,t},t.relativePosition=function(t){var i=this.toBezierArray(),n=i.length,r=n*t,s=Math.floor(r);s>=n&&(s=n-1),0>s&&(s=0);var o=i[s],e=1/n,a=s/n,y=t,h=y-a,f=h/e,x={x:0,y:0,normal:{x:0,y:0}};x.x=o.x(f),x.y=o.y(f);var c=o.tangent(f,!0);return x.normal.x=c.x,x.normal.y=c.y,x},t.replacePartWith=function(t,n,s){var o=function(t,n){var s=svgPathParser();s.parse(t),s.makePathAbsolute();var o=s.toBezierArray();s.fromBezierArray(o),n&&s.inverse();var e=s.toQuaternionPath(),y=function(t,n){var s=a(e),o=s.endPoint(),y="M 0 0 "+s.toSvgPath(),h=t;if(0==n.x&&0==n.y)return"";var f=Math.sqrt(o.x*o.x+o.y*o.y),x=Math.sqrt(n.x*n.x+n.y*n.y),c=x/f;if(0==f)return y;var u=i(),p=u.angleBetween(o,n),y=s.toSvgPath(h,r().rotate(p),function(t){return t.d=t.d*c,t});return y};return y},e=this.getPath(t);e.replaceFunction=o(n,s)},t.saveToOriginals=function(){this._original=JSON.parse(JSON.stringify(this._all))},t.scaleFactor=function(t,i){var n=this.findDimensions(),r=Math.abs(n[2]-n[0]),s=Math.abs(n[3]-n[1]),o=t/r,e=i/s,a=Math.min(o,e);return a},t.svgString=function(){var t,i,n="",r=this;return this._all.forEach(function(s){if("M"==s.name&&(t=s.points[0],i=s.points[1],n+="M"+r.n(t)+","+r.n(i)+" "),"m"==s.name&&(t+=s.points[0],i+=s.points[1],n+="M"+r.n(t)+","+r.n(i)+" "),"q"==s.name){n+="Q";for(var o=0;o<s.points.length;o+=4){var e=s.points,a=t+e[o+0],y=i+e[o+1],h=t+e[o+2],f=i+e[o+3];t=h,i=f,n+=r.n(a)+","+r.n(y)+" "+r.n(h)+","+r.n(f)+" "}}if("Q"==s.name){var e=s.points,x=s.points.length;n+="Q";for(var o=0;x>o;o+=4){var a=e[o+0],y=e[o+1],h=e[o+2],f=e[o+3];t=h,i=f,n+=r.n(a)+","+r.n(y)+" "+r.n(h)+","+r.n(f)+" "}}if("c"==s.name){n+="C";for(var o=0;o<s.points.length;o+=6){var e=s.points,a=t+e[o+0],y=i+e[o+1],h=t+e[o+2],f=i+e[o+3],c=t+e[o+4],u=i+e[o+5];t=c,i=u,n+=r.n(a)+","+r.n(y)+" "+r.n(h)+","+r.n(f)+" "+r.n(c)+","+r.n(u)+" "}}if("C"==s.name){var e=s.points,x=s.points.length;if(s.replaceFunction){for(var p={x:t,y:i},o=0;x>o;o+=6)t=e[o+4],i=e[o+5];var l={x:t-p.x,y:i-p.y},v=s.replaceFunction(p,l);n+=" "+v+" "}else{n+="C";for(var o=0;x>o;o+=6)n+=r.n(e[o+0])+","+r.n(e[o+1])+" "+r.n(e[o+2])+","+r.n(e[o+3])+" "+r.n(e[o+4])+","+r.n(e[o+5])+" ",t=e[o+4],i=e[o+5]}}if("l"==s.name){n+="L";for(var o=0;o<s.points.length;o+=2){var e=s.points,a=t+e[o+0],y=i+e[o+1];t=a,i=y,n+=r.n(a)+","+r.n(y)+" "}}if("H"==s.name){n+="L";for(var o=0;o<s.points.length;o++){var e=s.points,a=e[o+0];t=a,n+=r.n(a)+","+r.n(i)+" "}}if("V"==s.name){n+="L";for(var o=0;o<s.points.length;o++){var e=s.points,y=e[o+0];i=y,n+=r.n(t)+","+r.n(y)+" "}}if("L"==s.name)if(s.replaceFunction){for(var p={x:t,y:i},o=0;o<s.points.length;o+=2){var e=s.points,a=e[o+0],y=e[o+1];t=a,i=y}var l={x:t-p.x,y:i-p.y},v=s.replaceFunction(p,l);n+=" "+v+" "}else{n+="L";for(var o=0;o<s.points.length;o+=2){var e=s.points,a=e[o+0],y=e[o+1];t=a,i=y,n+=r.n(a)+","+r.n(y)+" "}}"z"==s.name&&(n+="z")}),n},t.toBezierArray=function(){var t,i,n="",r=[];return this._all.forEach(function(s){if("M"==s.name&&(t=s.points[0],i=s.points[1]),"Q"==s.name)for(var e=s.points,a=s.points.length,y=0;a>y;y+=4){var h=e[y+0],f=e[y+1],x=e[y+2],c=e[y+3],u=new o;u.fromQuadCurve({x:t,y:i},{x:h,y:f},{x:x,y:c}),r.push(u),t=x,i=c}if("C"==s.name)for(var e=s.points,a=s.points.length,y=0;a>y;y+=6){var h=e[y+0],f=e[y+1],x=e[y+2],c=e[y+3],p=e[y+4],l=e[y+5],u=new o;u.fromPoints({x:t,y:i},{x:h,y:f},{x:x,y:c},{x:p,y:l}),r.push(u),t=p,i=l}if("L"==s.name){n+="L";for(var y=0;y<s.points.length;y+=2){var e=s.points,h=e[y+0],f=e[y+1],u=new o;u.fromLine({x:t,y:i},{x:h,y:f}),r.push(u),t=h,i=f}}}),r},t.toQuaternionPath=function(){var t=!0,n={x:0,y:0},s={x:100,y:0},o={x:100,y:0},e=i(),a=[];return this.forCmds(function(i){var y={cmd:i.name,path:[]},h=function(i,a){s.x=i-n.x,s.y=a-n.y;var h=Math.sqrt(s.x*s.x+s.y*s.y);0==h&&(s.x+=.2,s.y+=.2,i+=.02,a+=.02,h=Math.sqrt(s.x*s.x+s.y*s.y));var f=e.angleBetween(o,s),x=r();x.setFromAxisRotation({x:0,y:0,z:1},f),t||y.path.push({q:x,d:h}),t=!1,n.x=i,n.y=a,o.x=s.x,o.y=s.y};"M"==i.name&&h(i.points[0],i.points[1]),"L"==i.name&&h(i.points[0],i.points[1]),"Q"==i.name&&(h(i.points[0],i.points[1]),h(i.points[2],i.points[3])),"C"==i.name&&(h(i.points[0],i.points[1]),h(i.points[2],i.points[3]),h(i.points[4],i.points[5])),y.path.length&&a.push(y)}),a},t.transformPoints=function(t){for(var i,n=this.originals(),r={x:0,y:0},s=n.length,i=(this._all,0);s>i;i++){var o=n[i],e=this._all[i];if(!o)return;if("M"==o.name&&(r.x=o.points[0],r.y=o.points[1],t(r),e.points[0]=r.x,e.points[1]=r.y),"Q"==o.name)for(var a=o.points,y=e.points,h=o.points.length,f=0;h>f;f+=4)r.x=a[f+0],r.y=a[f+1],t(r),y[f+0]=r.x,y[f+1]=r.y,r.x=a[f+2],r.y=a[f+3],t(r),y[f+2]=r.x,y[f+3]=r.y;if("C"==o.name)for(var a=o.points,y=e.points,h=o.points.length,f=0;h>f;f+=6)r.x=a[f+0],r.y=a[f+1],t(r),y[f+0]=r.x,y[f+1]=r.y,r.x=a[f+2],r.y=a[f+3],t(r),y[f+2]=r.x,y[f+3]=r.y,r.x=a[f+4],r.y=a[f+5],t(r),y[f+4]=r.x,y[f+5]=r.y;if("L"==o.name)for(var f=0;f<o.points.length;f+=2){var a=o.points,y=e.points;r.x=a[f+0],r.y=a[f+1],t(r),y[f+0]=r.x,y[f+1]=r.y}}}}(this)},svgPathParser=function(t,i,n,r,s,o,e,a){if(!(this instanceof svgPathParser))return new svgPathParser(t,i,n,r,s,o,e,a);var y=[t,i,n,r,s,o,e,a];if(this.__factoryClass){var h,f=this;if(this.__factoryClass.forEach(function(t){h=t.apply(f,y)}),"[object Function]"==Object.prototype.toString.call(h)){if(h._classInfo.name!=svgPathParser._classInfo.name)return new h(t,i,n,r,s,o,e,a)}else if(h)return h}if(this.__traitInit){var f=this;this.__traitInit.forEach(function(t){t.apply(f,y)})}else"function"==typeof this.init&&this.init.apply(this,y)};svgPathParser._classInfo={name:"svgPathParser"},svgPathParser.prototype=new svgPathParser_prototype,"undefined"!=typeof window&&(window.svgPathParser=svgPathParser),"undefined"!=typeof window&&(window.svgPathParser_prototype=svgPathParser_prototype);